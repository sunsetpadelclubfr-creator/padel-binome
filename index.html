<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Test Auth Firebase</title>
  <style>
    body{font-family:system-ui;margin:16px}
    .card{max-width:560px;margin:0 auto;border:1px solid #ddd;border-radius:14px;padding:16px}
    input,button{width:100%;padding:10px;margin:6px 0;border:1px solid #ccc;border-radius:10px}
    button{cursor:pointer}
    .muted{color:#666;font-size:14px}
    .hidden{display:none}
    pre{background:#111;color:#eee;padding:10px;border-radius:10px;white-space:pre-wrap}
  </style>
</head>
<body>
  <div class="card">
    <h2>Test Auth Firebase</h2>

    <div id="authView">
      <input id="email" type="email" placeholder="Email" />
      <input id="password" type="password" placeholder="Mot de passe (min 6)" />
      <button id="btnLogin" type="button">Se connecter</button>
    <button id="btnSignup" type="button">Créer un compte</button>
    <button id="btnLogout" type="button">Se déconnecter</button>
      btnLoginEl.addEventListener("click", async (e) => {
  e.preventDefault();
  authMsgEl.textContent = "Clic login ✅";
  try{
    await signInWithEmailAndPassword(auth, emailEl.value.trim(), passwordEl.value);
    authMsgEl.textContent = "Connecté ✅";
  }catch(err){
    authMsgEl.textContent = "Erreur login: " + (err?.message || err);
    console.log("login error", err);
  }
});

btnSignupEl.addEventListener("click", async (e) => {
  e.preventDefault();
  authMsgEl.textContent = "Clic signup ✅";
  try{
    await createUserWithEmailAndPassword(auth, emailEl.value.trim(), passwordEl.value);
    authMsgEl.textContent = "Compte créé ✅";
  }catch(err){
    authMsgEl.textContent = "Erreur signup: " + (err?.message || err);
    console.log("signup error", err);
  }
});
      <p id="authMsg" class="muted"></p>
    </div>

    <div id="appView" class="hidden">
      <p id="userLine" class="muted"></p>
      <button id="btnLogout">Se déconnecter</button>

      <details style="margin-top:10px">
        <summary>Debug</summary>
        <pre id="debug"></pre>
      </details>
    </div>
  </div>
alert("JS chargé ✅");
<script type="module">
  
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import {
    getAuth, onAuthStateChanged,
    createUserWithEmailAndPassword,
    signInWithEmailAndPassword,
    signOut
  } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyAN3k8oOsG_42wRmmkdHqKs7XjIamNiVy4",
    authDomain: "padel-binome.firebaseapp.com",
    projectId: "padel-binome",
    storageBucket: "padel-binome.firebasestorage.app",
    messagingSenderId: "968501656511",
    appId: "1:968501656511:web:464dca20866e202d53ff0a"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  const authView = document.getElementById("authView");
  const appView  = document.getElementById("appView");
  const emailEl  = document.getElementById("email");
  const passEl   = document.getElementById("password");
  const msgEl    = document.getElementById("authMsg");
  const userLine = document.getElementById("userLine");
  const dbg      = document.getElementById("debug");

  function debug(title, obj){
    dbg.textContent = `[${new Date().toISOString()}] ${title}\n` +
      JSON.stringify(obj, Object.getOwnPropertyNames(obj), 2);
    console.log(title, obj);
  }

  window.addEventListener("error", (e)=>{ msgEl.textContent = "Erreur JS: " + e.message; debug("window.error", e); });
  window.addEventListener("unhandledrejection", (e)=>{ msgEl.textContent = "Promise: " + (e.reason?.message||e.reason); debug("unhandledrejection", e.reason); });

  document.getElementById("btnSignup").onclick = async () => {
    msgEl.textContent = "Création...";
    try{
      await createUserWithEmailAndPassword(auth, emailEl.value.trim(), passEl.value);
      msgEl.textContent = "Compte créé ✅";
    }catch(e){
      msgEl.textContent = "Erreur: " + (e.message || e);
      debug("signup.error", e);
    }
  };

  document.getElementById("btnLogin").onclick = async () => {
    msgEl.textContent = "Connexion...";
    try{
      await signInWithEmailAndPassword(auth, emailEl.value.trim(), passEl.value);
      msgEl.textContent = "Connecté ✅";
    }catch(e){
      msgEl.textContent = "Erreur: " + (e.message || e);
      debug("login.error", e);
    }
  };

  document.getElementById("btnLogout").onclick = async () => {
    await signOut(auth);
  };

  onAuthStateChanged(auth, (user)=>{
    if(!user){
      appView.classList.add("hidden");
      authView.classList.remove("hidden");
      return;
    }
    authView.classList.add("hidden");
    appView.classList.remove("hidden");
    userLine.textContent = `Connecté: ${user.email} | uid=${user.uid} | projectId=${app.options.projectId}`;
  });
</script>
</body>
</html>
